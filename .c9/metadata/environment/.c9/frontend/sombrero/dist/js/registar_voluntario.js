{"changed":true,"filter":false,"title":"registar_voluntario.js","tooltip":"/.c9/frontend/sombrero/dist/js/registar_voluntario.js","value":"const volunForm = document.getElementById(\"volun_form\");\n    \n    let btnSubmit = document.getElementById(\"registrate_mat\");\n    \n    btnSubmit.onclick = function(e){\n        adicionar_material();\n    }\n   \n    function adicionar_material(){\n        \n        const materialForm = document.getElementById(\"regmaterial_form\");\n        let quantidade = document.getElementById(\"regmat_quantity\").value;\n        let tipo = document.getElementById(\"regmaterial_type\").value;\n        \n        if(tipo == \"Selecione o material pretendido\" && quantidade == \"Selecione a quantidade do material\" ){\n            \n            alert(\"Preencha os campos todos!\");\n        }\n        \n        else if(tipo == \"Selecione o material pretendido\"){\n            \n            alert(\"Selecione o tipo de material\");\n        } \n        \n        else if(quantidade == \"Selecione a quantidade do material\"){\n            \n            alert(\"Selecione quantos materiais do tipo selecionado é que quer adicionar\");\n        }\n        \n        else{\n        \n        for(let i = 0; i < quantidade; i++) {\n            \n        \n        let dados = {};\n         \n        dados.material_type = document.getElementById(\"regmaterial_type\").value;\n        console.log(dados);\n        \n        fetch(\"https://395d8654ffeb4196bccfb50daba7e22d.vfs.cloud9.us-east-1.amazonaws.com/materials/\", {\n             headers: { 'Content-Type': 'application/json' },\n             method: 'POST',\n             body: JSON.stringify(dados)\n        }).then(function(response) {\n\n\n            if (!response.ok) {\n                 console.log(response.status); //=> number 100–599\n                 console.log(response.statusText); //=> String\n                 console.log(response.headers); //=> Headers\n                 console.log(response.url); //=> String\n                 if (response.status === 409) {\n                     alert(\"Duplicated ID\");\n                 }\n                 else {\n                     throw Error(response.statusText);\n                 }\n             }\n             else {\n                 materialForm.reset(); //limpeza dos dados do form\n                 \n                 if((quantidade > 1) && (i==0)){\n                 alert(\"Materiais submetidos com sucesso\");\n                 window.location.replace(\"registar_material.html\");}\n                 else if(quantidade == 1){\n                    alert(\"Material submetido com sucesso\");\n                    window.location.replace(\"registar_material.html\"); \n                }\n               \n             }\n         }).then(function(result) {\n             console.log(result);\n         }).catch(function(err) {\n             alert(\"Erro de Submissão\");\n             console.error(err);\n         });\n         \n        }\n        } \n    }","undoManager":{"mark":-2,"position":2,"stack":[[{"start":{"row":0,"column":0},"end":{"row":79,"column":5},"action":"insert","lines":["const materialForm = document.getElementById(\"regmaterial_form\");","    ","    let btnSubmit = document.getElementById(\"registrate_mat\");","    ","    btnSubmit.onclick = function(e){","        adicionar_material();","    }","   ","    function adicionar_material(){","        ","        const materialForm = document.getElementById(\"regmaterial_form\");","        let quantidade = document.getElementById(\"regmat_quantity\").value;","        let tipo = document.getElementById(\"regmaterial_type\").value;","        ","        if(tipo == \"Selecione o material pretendido\" && quantidade == \"Selecione a quantidade do material\" ){","            ","            alert(\"Preencha os campos todos!\");","        }","        ","        else if(tipo == \"Selecione o material pretendido\"){","            ","            alert(\"Selecione o tipo de material\");","        } ","        ","        else if(quantidade == \"Selecione a quantidade do material\"){","            ","            alert(\"Selecione quantos materiais do tipo selecionado é que quer adicionar\");","        }","        ","        else{","        ","        for(let i = 0; i < quantidade; i++) {","            ","        ","        let dados = {};","         ","        dados.material_type = document.getElementById(\"regmaterial_type\").value;","        console.log(dados);","        ","        fetch(\"https://395d8654ffeb4196bccfb50daba7e22d.vfs.cloud9.us-east-1.amazonaws.com/materials/\", {","             headers: { 'Content-Type': 'application/json' },","             method: 'POST',","             body: JSON.stringify(dados)","        }).then(function(response) {","","","            if (!response.ok) {","                 console.log(response.status); //=> number 100–599","                 console.log(response.statusText); //=> String","                 console.log(response.headers); //=> Headers","                 console.log(response.url); //=> String","                 if (response.status === 409) {","                     alert(\"Duplicated ID\");","                 }","                 else {","                     throw Error(response.statusText);","                 }","             }","             else {","                 materialForm.reset(); //limpeza dos dados do form","                 ","                 if((quantidade > 1) && (i==0)){","                 alert(\"Materiais submetidos com sucesso\");","                 window.location.replace(\"registar_material.html\");}","                 else if(quantidade == 1){","                    alert(\"Material submetido com sucesso\");","                    window.location.replace(\"registar_material.html\"); ","                }","               ","             }","         }).then(function(result) {","             console.log(result);","         }).catch(function(err) {","             alert(\"Erro de Submissão\");","             console.error(err);","         });","         ","        }","        } ","    }"],"id":1}],[{"start":{"row":0,"column":46},"end":{"row":0,"column":62},"action":"remove","lines":["regmaterial_form"],"id":2},{"start":{"row":0,"column":46},"end":{"row":0,"column":56},"action":"insert","lines":["volun_form"]}],[{"start":{"row":0,"column":6},"end":{"row":0,"column":14},"action":"remove","lines":["material"],"id":3},{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"insert","lines":["v"]},{"start":{"row":0,"column":7},"end":{"row":0,"column":8},"action":"insert","lines":["o"]},{"start":{"row":0,"column":8},"end":{"row":0,"column":9},"action":"insert","lines":["l"]},{"start":{"row":0,"column":9},"end":{"row":0,"column":10},"action":"insert","lines":["u"]},{"start":{"row":0,"column":10},"end":{"row":0,"column":11},"action":"insert","lines":["n"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":5,"column":13},"end":{"row":5,"column":13},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1609550244082}