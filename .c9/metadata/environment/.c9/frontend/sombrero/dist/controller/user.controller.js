{"changed":true,"filter":false,"title":"user.controller.js","tooltip":"/.c9/frontend/sombrero/dist/controller/user.controller.js","value":"//quando inicia a página faz\nwindow.onload = function() {\n    //chama a função para atualizar os users\n    refreshUtilizadores(); //adicionar função de validação ao formulário\n    validator();\n    document.getElementById(\"formNewUser\").onsubmit = function(e) {\n        //validação do formulário ao submeter\n        validator();\n    };\n    \n    \n        \n    function refreshUtilizadores() {\n    fetch('https://395d8654ffeb4196bccfb50daba7e22d.vfs.cloud9.us-east-1.amazonaws.com/materials/')\n        .then(res => res.json())\n        .then((out) => {\n            $('#table_material tbody').empty();\n            $.each(out, function(index, mat) {\n                $('#table_material tbody').append(\n                    `\n                <tr>\n                    <td>${mat.id_material}</td>\n                    <td>${mat.material_type}</td>\n                    <td>${mat.availability}</td>\n                    <td><i id='${mat.id_material}' class='fas fa-trash-alt remove'></i></td>\n                </tr>\n            ` \n            );\n            \n            tudo();\n            \n            });\n        }).catch(err => console.error(err));\n    }\n    \n    \n    \n    \n    //função de validação\n    function validator() {\n        let validator = new Validator(document.querySelector('form[name=\"formNewUser\"]'), function(err, res) {\n            if (res) {\n                saveUsers();\n            }\n        }, {\n            rules: {\n                password: function(value) {\n                    return (value === document.getElementById(\"pwd\").value);\n                }\n            },\n            messages: {\n                en: {\n                    password: {\n                        incorrect: \"Password didn't match\"\n                    }\n                }\n            }\n        });\n    }\n    \n    \n};\n\n\n\n\n\n\n","undoManager":{"mark":-2,"position":3,"stack":[[{"start":{"row":12,"column":20},"end":{"row":12,"column":29},"action":"remove","lines":["Materials"],"id":2},{"start":{"row":12,"column":20},"end":{"row":12,"column":21},"action":"insert","lines":["U"]},{"start":{"row":12,"column":21},"end":{"row":12,"column":22},"action":"insert","lines":["t"]},{"start":{"row":12,"column":22},"end":{"row":12,"column":23},"action":"insert","lines":["i"]},{"start":{"row":12,"column":23},"end":{"row":12,"column":24},"action":"insert","lines":["l"]},{"start":{"row":12,"column":24},"end":{"row":12,"column":25},"action":"insert","lines":["i"]},{"start":{"row":12,"column":25},"end":{"row":12,"column":26},"action":"insert","lines":["z"]},{"start":{"row":12,"column":26},"end":{"row":12,"column":27},"action":"insert","lines":["a"]},{"start":{"row":12,"column":27},"end":{"row":12,"column":28},"action":"insert","lines":["d"]},{"start":{"row":12,"column":28},"end":{"row":12,"column":29},"action":"insert","lines":["o"]},{"start":{"row":12,"column":29},"end":{"row":12,"column":30},"action":"insert","lines":["r"]}],[{"start":{"row":12,"column":30},"end":{"row":12,"column":31},"action":"insert","lines":["e"],"id":3},{"start":{"row":12,"column":31},"end":{"row":12,"column":32},"action":"insert","lines":["s"]}],[{"start":{"row":3,"column":4},"end":{"row":3,"column":20},"action":"remove","lines":["refreshMaterials"],"id":4},{"start":{"row":3,"column":4},"end":{"row":3,"column":23},"action":"insert","lines":["refreshUtilizadores"]}],[{"start":{"row":13,"column":11},"end":{"row":13,"column":87},"action":"remove","lines":["https://395d8654ffeb4196bccfb50daba7e22d.vfs.cloud9.us-east-1.amazonaws.com/"],"id":5},{"start":{"row":13,"column":11},"end":{"row":13,"column":87},"action":"insert","lines":["https://395d8654ffeb4196bccfb50daba7e22d.vfs.cloud9.us-east-1.amazonaws.com/"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":19,"column":21},"end":{"row":19,"column":21},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1609304964641}